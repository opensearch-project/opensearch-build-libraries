   PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.run()
      PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.pipeline(groovy.lang.Closure)
         PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.echo(Executing on agent [label:none])
         PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.stage(promote, groovy.lang.Closure)
            PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.script(groovy.lang.Closure)
               PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.createSha512Checksums()
               PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.createSignatureFiles()
                  createSignatureFiles.legacySCM(groovy.lang.Closure)
                  createSignatureFiles.library({identifier=jenkins@11.2.0, retriever=null})
               PromoteArtifacts_actions_OpenSearch_Dashboards_Jenkinsfile.promoteArtifacts({manifest=tests/data/opensearch-dashboards-1.3.0.yml, fileActions=[groovy.lang.Closure, groovy.lang.Closure]})
                  promoteArtifacts.legacySCM(groovy.lang.Closure)
                  promoteArtifacts.library({identifier=jenkins@11.2.0, retriever=null})
                  promoteArtifacts.readYaml({file=tests/data/opensearch-dashboards-1.3.0.yml})
                  InputManifest.asBoolean()
                  promoteArtifacts.withSecrets({secrets=[{envVar=AWS_ACCOUNT_PUBLIC, secretRef=op://opensearch-infra-secrets/aws-accounts/jenkins-aws-account-public}, {envVar=ARTIFACT_BUCKET_NAME, secretRef=op://opensearch-infra-secrets/aws-resource-arns/jenkins-artifact-bucket-name}, {envVar=ARTIFACT_PROMOTION_ROLE_NAME, secretRef=op://opensearch-infra-secrets/aws-iam-roles/jenkins-artifact-promotion-role}, {envVar=AWS_ACCOUNT_ARTIFACT, secretRef=op://opensearch-infra-secrets/aws-accounts/jenkins-aws-production-account}, {envVar=ARTIFACT_PRODUCTION_BUCKET_NAME, secretRef=op://opensearch-infra-secrets/aws-resource-arns/jenkins-artifact-production-bucket-name}]}, groovy.lang.Closure)
                     promoteArtifacts.println(zip start promoting)
                     promoteArtifacts.println(S3 download windows x64 zip 1.3.0 from vars-build build number 33 artifacts before creating signatures)
                     promoteArtifacts.withAWS({role=opensearch-bundle, roleAccount=AWS_ACCOUNT_PUBLIC, duration=900, roleSessionName=jenkins-session}, groovy.lang.Closure)
                        promoteArtifacts.s3Download({bucket=ARTIFACT_BUCKET_NAME, file=tests/jenkins/artifacts/zip, path=vars-build/1.3.0/33/windows/x64/zip/, force=true})
                     promoteArtifacts.readYaml({file=tests/jenkins/artifacts/zip/vars-build/1.3.0/33/windows/x64/zip/builds/opensearch-dashboards/manifest.yml})
                     promoteArtifacts.fileExists(tests/jenkins/artifacts/zip/vars-build/1.3.0/33/windows/x64/zip/builds/opensearch-dashboards/core-plugins)
                     promoteArtifacts.println(Signing Starts)
                     promoteArtifacts.println(Signing Core/Bundle Artifacts)
                     promoteArtifacts.findFiles({glob=**/opensearch-dashboards-min-1.3.0*.zip*,**/opensearch-dashboards-1.3.0*.zip*})
                     promoteArtifacts.getPath()
                     createSha512Checksums.isUnix()
                     createSha512Checksums.bat({script=bash -c "find tests/jenkins/tests/jenkins/file/found.zip -type f", returnStdout=true})
                     createSha512Checksums.echo(Not generating sha for ccc with artifact Path tests/jenkins/tests/jenkins/file/found.zip, doesn't match allowed types [.tar.gz, .zip, .rpm, .deb])
                     promoteArtifacts.findFiles({glob=**/opensearch-dashboards-min-1.3.0*.zip*,**/opensearch-dashboards-1.3.0*.zip*})
                     promoteArtifacts.getPath()
                     createSignatureFiles.signArtifacts({sigtype=.sig, email=opensearch@amazon.com, artifactPath=tests/jenkins/tests/jenkins/file/found.zip})
                        signArtifacts.fileExists(tests/jenkins/sign.sh)
                        signArtifacts.sh(curl -sSL https://artifacts.opensearch.org/publickeys/opensearch.pgp | gpg --import - && curl -sSL https://artifacts.opensearch.org/publickeys/opensearch-release.pgp | gpg --import -)
                        signArtifacts.withSecrets({secrets=[{envVar=GITHUB_USER, secretRef=op://opensearch-infra-secrets/github-bot/ci-bot-username}, {envVar=GITHUB_TOKEN, secretRef=op://opensearch-infra-secrets/github-bot/ci-bot-token}, {envVar=SIGNER_CLIENT_ROLE, secretRef=op://opensearch-infra-secrets/client-signing/jenkins-signer-client-role}, {envVar=SIGNER_CLIENT_EXTERNAL_ID, secretRef=op://opensearch-infra-secrets/client-signing/jenkins-signer-client-external-id}, {envVar=SIGNER_CLIENT_UNSIGNED_BUCKET, secretRef=op://opensearch-infra-secrets/client-signing/jenkins-signer-client-unsigned-bucket}, {envVar=SIGNER_CLIENT_SIGNED_BUCKET, secretRef=op://opensearch-infra-secrets/client-signing/jenkins-signer-client-signed-bucket}]}, groovy.lang.Closure)
                           signArtifacts.sh(#!/bin/bash
                   set +x
                   export ROLE=SIGNER_CLIENT_ROLE
                   export EXTERNAL_ID=SIGNER_CLIENT_EXTERNAL_ID
                   export UNSIGNED_BUCKET=SIGNER_CLIENT_UNSIGNED_BUCKET
                   export SIGNED_BUCKET=SIGNER_CLIENT_SIGNED_BUCKET

                   tests/jenkins/sign.sh tests/jenkins/tests/jenkins/file/found.zip --sigtype .sig --email opensearch@amazon.com
               )
                     promoteArtifacts.withAWS({role=ARTIFACT_PROMOTION_ROLE_NAME, roleAccount=AWS_ACCOUNT_ARTIFACT, duration=900, roleSessionName=jenkins-session}, groovy.lang.Closure)
                        promoteArtifacts.s3Upload({bucket=ARTIFACT_PRODUCTION_BUCKET_NAME, path=releases/bundle/opensearch-dashboards/1.3.0/, workingDir=tests/jenkins/artifacts/zip/vars-build/1.3.0/33/windows/x64/zip/dist/opensearch-dashboards/, includePathPattern=**/opensearch-dashboards-1.3.0-windows-x64*})
